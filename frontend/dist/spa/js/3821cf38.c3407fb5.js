(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3821cf38"],{"04e1":function(t,e,o){"use strict";var a=o("7afa");function s(t){this.message=t}s.prototype=new Error,s.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!==typeof t)throw new s("Invalid token specified");e=e||{};var o=!0===e.header?0:1;try{return JSON.parse(a(t.split(".")[o]))}catch(i){throw new s("Invalid token specified: "+i.message)}},t.exports.InvalidTokenError=s},"5c5c":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{attrs:{padding:""}},[o("q-dialog",{attrs:{position:"top"},model:{value:t.createPostDialog,callback:function(e){t.createPostDialog=e},expression:"createPostDialog"}},[o("q-card",{staticStyle:{width:"500px"}},[o("q-linear-progress",{attrs:{value:.6,color:"pink"}}),o("q-card-section",{staticClass:"row items-center no-wrap"},[o("q-list",[o("q-item",[o("q-item-section",{attrs:{avatar:"",top:""}},[o("q-avatar",[o("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar3.jpg"}})])],1),o("q-item-section",[o("q-editor",{attrs:{toolbar:[["left","center","right","justify"],["bold","italic","underline","strike"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h3","h4","h5","h6","code"]}],["undo","redo"]]},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1)],1),o("q-item",{staticStyle:{padding:"0 15px 10px"},attrs:{dense:""}},[o("q-item-section"),o("q-item-section",{attrs:{side:""}},[o("q-item-label",[o("q-btn",{attrs:{size:"md",push:"",color:"primary",label:"Share"},on:{click:t.savePost}})],1)],1)],1)],1)],1)],1)],1),o("q-card",{staticClass:"caption",staticStyle:{"margin-bottom":"10px"},attrs:{bordered:"",flat:""}},[o("q-list",{attrs:{bordered:""}},[o("q-item",[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",[t.post.postedBy?o("img",{attrs:{src:t.$axios.defaults.baseURL+t.post.postedBy.profileImage}}):t._e()])],1),o("q-item-section",[t.post.postedBy?o("q-item-label",[t._v(t._s(t.post.postedBy.name))]):t._e(),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(t.post.date))])],1),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{size:"sm",color:"grey-7",round:"",flat:"",icon:"more_vert"}},[o("q-menu",{attrs:{square:"",dense:"","transition-show":"flip-right",anchor:"bottom right",self:"top left","transition-hide":"flip-left","auto-close":""}},[o("q-list",[o("q-item",{attrs:{clickable:t.post.postedBy.id===t.getCurrentUser.userId},on:{click:function(e){return t.handleRemovePost(t.post.id,t.index)}}},[o("q-item-section",[t._v("Remove Post")])],1),o("q-item",{attrs:{clickable:t.post.postedBy.id===t.getCurrentUser.userId},on:{click:function(e){return t.handleUpdatePost(t.post,t.index)}}},[o("q-item-section",[t._v("Edit Post")])],1)],1)],1)],1)],1)],1),o("q-item",{staticStyle:{padding:"5px"}},[o("q-item-section",{domProps:{innerHTML:t._s(t.post.content)}})],1),o("q-item",{attrs:{dense:""}},[o("q-item-section",{attrs:{avatar:""}},[o("q-btn",{attrs:{size:"sm",flat:"",round:"",color:"primary",icon:"fas fa-thumbs-up"}},[o("q-badge",{attrs:{color:"orange",floating:""}},[t._v(t._s(t.post.totalLike))]),o("q-tooltip",{attrs:{anchor:"bottom left",self:"center left"}},[t._v("Here I am!")])],1)],1),o("q-item-section"),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{size:"sm",flat:"",round:"",color:"secondary",icon:"fas fa-comments"}},[o("q-badge",{attrs:{color:"orange",floating:""}},[t._v(t._s(t.post.totalComments))]),o("q-tooltip",{attrs:{anchor:"bottom left",self:"center left"}},[t._v("Here I am!")])],1)],1)],1),o("q-separator"),o("q-item",{staticStyle:{padding:"0"},attrs:{dense:""}},[o("q-item-section",[o("q-btn-group",{attrs:{size:"sm",flat:"",spread:""}},[o("q-btn",{attrs:{size:"sm",flat:"",icon:"fas fa-thumbs-up",color:"grey-7","text-color":t.post.liked?"primary":"",label:"Like"},on:{click:function(e){t.post.liked?t.handlePostUnlike(t.post.id):t.handlePostLike(t.post.id)}}}),o("q-btn",{attrs:{size:"sm",flat:"",icon:"fas fa-comments",color:"grey-7",label:"Comment"}})],1)],1)],1),o("q-separator"),o("q-item",[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",[o("img",{attrs:{src:"https://cdn.quasar.dev/img/"+t.offline[0].avatar}})])],1),o("q-item-section",[o("q-input",{attrs:{rounded:"",autogrow:"",standout:"",dense:""},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{outline:"",round:"",color:"primary",icon:"fas fa-2x fa-paperclip"},on:{click:t.postComment}})],1)],1)],1),t._l(t.post.comments,function(e){return o("q-list",{key:e._id},[o("q-item",[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",[o("img",{attrs:{src:"https://cdn.quasar.dev/img/"+t.offline[0].avatar}})])],1),o("q-item-section",[t.post.postedBy?o("q-item-label",[t._v(t._s(e.commentBy.name))]):t._e(),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.comment))]),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.updatedAt))])],1)],1)],1)})],2)],1)},s=[],i=o("4db1"),n=o.n(i),r=(o("20d6"),o("7f7f"),o("04e1")),c=o.n(r),d=[{id:5,name:"Brunhilde Panswick",email:"bpanswick4@csmonitor.com",avatar:"avatar2.jpg"}],l={props:["id"],data:function(){return{post:{comments:[]},post_params:{page:1,count:1,size:5},comment:"",items:[],offline:d,drawerLeft:!0,createPostDialog:!1,editor:""}},computed:{getCurrentUser:function(){return c()(this.$q.sessionStorage.getItem("token"))}},created:function(){},mounted:function(){this.getPostDetail(this.id)},methods:{postComment:function(){var t=this;this.$q.loading.show(),this.$axios.post("/api/v1/post/".concat(this.id,"/comment/"),{comment:this.comment}).then(function(e){t.$q.loading.hide(),t.post.comments=e.data.post.comments}),this.comment=""},getPostDetail:function(t){var e=this;this.$axios.get("/api/v1/post/".concat(t)).then(function(t){e.post={id:t.data.post._id,content:t.data.post.content,postedBy:{id:t.data.post.postedBy._id,name:t.data.post.postedBy.name,profileImage:t.data.post.postedBy.profileImage},date:t.data.post.updatedAt,liked:t.data.post.liked,totalComments:t.data.post.totalComments,totalLike:t.data.post.totalLike,comments:t.data.post.comments}})},handleDetailPost:function(t){this.$router.push({id:t,name:"feed-detail"})},handleUpdatePost:function(t,e){this.createPostDialog=!0,this.editor=t.content},handleRemovePost:function(t,e){var o=this;this.$axios.delete("/api/v1/post/".concat(t)).then(function(t){o.items.splice(e,1),o.post_params.count=o.post_params.count-1,o.$q.notify({message:"Post Deleted",color:"green"})})},savePost:function(){var t=this;this.$q.loading.show(),this.$axios.post("/api/v1/createPost",{content:this.editor}).then(function(e){console.log(e.data),t.$q.loading.hide(),t.createPostDialog=!1,t.items.unshift({id:e.data.post._id,content:e.data.post.content,postedBy:{name:"sagar",id:e.data.post.postedBy},date:e.data.post.updatedAt}),t.editor=""})},updatePost:function(){},handlePostLike:function(t){var e=this;this.$axios.put("/api/v1/like/".concat(t)).then(function(t){var o=e.items.findIndex(function(e){return e.id===t.data.post._id});e.items[o]["liked"]=!0,e.items[o]["totalLike"]=t.data.post.totalLike})},handlePostUnlike:function(t){var e=this;this.$axios.put("/api/v1/unlike/".concat(t)).then(function(t){var o=e.items.findIndex(function(e){return e.id===t.data.post._id});e.items[o]["liked"]=!1,e.items[o]["totalLike"]=t.data.post.totalLike})},onLoad:function(t,e){var o=this;console.log(this.items.length,this.post_params.count),this.items.length<this.post_params.count&&(this.post_params.page=t,this.$axios.get("/api/v1/getPosts",{params:this.post_params}).then(function(t){var a;o.post_params.count=t.data.totalPosts;var s=t.data.posts.map(function(t){return{id:t._id,content:t.content,postedBy:{id:t.postedBy._id,name:t.postedBy.name},date:t.updatedAt,liked:t.liked,totalComments:t.totalComments,totalLike:t.totalLike}});(a=o.items).push.apply(a,n()(s)),e()}))}}},p=l,m=o("2877"),u=Object(m["a"])(p,a,s,!1,null,null,null);e["default"]=u.exports},"7afa":function(t,e,o){var a=o("9b81");function s(t){return decodeURIComponent(a(t).replace(/(.)/g,function(t,e){var o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return s(e)}catch(o){return a(e)}}},"9b81":function(t,e){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(t){this.message=t}function s(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,i,n=0,r=0,c="";i=e.charAt(r++);~i&&(s=n%4?64*s+i:i,n++%4)?c+=String.fromCharCode(255&s>>(-2*n&6)):0)i=o.indexOf(i);return c}a.prototype=new Error,a.prototype.name="InvalidCharacterError",t.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||s}}]);