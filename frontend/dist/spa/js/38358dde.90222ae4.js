(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["38358dde"],{"04e1":function(t,e,a){"use strict";var o=a("7afa");function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!==typeof t)throw new i("Invalid token specified");e=e||{};var a=!0===e.header?0:1;try{return JSON.parse(o(t.split(".")[a]))}catch(s){throw new i("Invalid token specified: "+s.message)}},t.exports.InvalidTokenError=i},"7afa":function(t,e,a){var o=a("9b81");function i(t){return decodeURIComponent(o(t).replace(/(.)/g,function(t,e){var a=e.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return i(e)}catch(a){return o(e)}}},"9b81":function(t,e){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(t){this.message=t}function i(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,n=0,r=0,c="";s=e.charAt(r++);~s&&(i=n%4?64*i+s:s,n++%4)?c+=String.fromCharCode(255&i>>(-2*n&6)):0)s=a.indexOf(s);return c}o.prototype=new Error,o.prototype.name="InvalidCharacterError",t.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||i},b1e8:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("q-dialog",{attrs:{position:"top"},model:{value:t.createPostDialog,callback:function(e){t.createPostDialog=e},expression:"createPostDialog"}},[a("q-card",{staticStyle:{width:"500px"}},[a("q-linear-progress",{attrs:{value:.6,color:"pink"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("q-list",[a("q-item",[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",[a("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar3.jpg"}})])],1),a("q-item-section",[a("q-editor",{attrs:{toolbar:[["left","center","right","justify"],["bold","italic","underline","strike"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h3","h4","h5","h6","code"]}],["undo","redo"]]},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1)],1),a("q-item",{staticStyle:{padding:"0 15px 10px"},attrs:{dense:""}},[a("q-item-section"),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[a("q-btn",{attrs:{size:"md",push:"",color:"primary",label:"Share"},on:{click:t.savePost}})],1)],1)],1)],1)],1)],1)],1),a("q-card",{staticStyle:{"margin-bottom":"10px"}},[a("q-list",{attrs:{bordered:""}},[a("q-item",[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",[a("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar3.jpg"}})])],1),a("q-item-section",[a("q-btn",{attrs:{outline:"",rounded:"",color:"primary",label:"",ripple:!1,"no-caps":""},on:{click:function(e){t.createPostDialog=!0}}})],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{outline:"",round:"",color:"primary",icon:"fas fa-2x fa-paperclip"}})],1)],1)],1)],1),a("q-page-sticky",{staticStyle:{"z-index":"9999"},attrs:{position:"bottom-right",offset:[18,18]}},[a("q-btn",{attrs:{size:"sm",fab:"",icon:"fas fa-comments",color:"accent"}})],1),a("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[a("div",{staticClass:"row justify-center q-my-md"},[t.items.length<t.post_params.count?a("q-spinner-dots",{attrs:{color:"primary",size:"40px"}}):a("q-card",[t._v(" -- End of post -- ")])],1)]},proxy:!0}])},t._l(t.items,function(e,o){return a("q-card",{key:o,staticClass:"caption",staticStyle:{"margin-bottom":"10px"},attrs:{bordered:"",flat:""}},[a("q-list",{attrs:{bordered:""}},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",[a("img",{attrs:{src:"https://cdn.quasar.dev/img/"+t.offline[0].avatar}})])],1),a("q-item-section",[e.postedBy?a("q-item-label",[t._v(t._s(e.postedBy.name))]):t._e(),a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.date))])],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",color:"grey-7",round:"",flat:"",icon:"more_vert"}},[a("q-menu",{attrs:{square:"",dense:"","transition-show":"flip-right",anchor:"bottom right",self:"top left","transition-hide":"flip-left","auto-close":""}},[a("q-list",[a("q-item",{attrs:{clickable:e.postedBy.id===t.getCurrentUser.userId},on:{click:function(a){return t.handleRemovePost(e.id,o)}}},[a("q-item-section",[t._v("Remove Post")])],1),a("q-item",{attrs:{clickable:e.postedBy.id===t.getCurrentUser.userId},on:{click:function(a){return t.handleUpdatePost(e,o)}}},[a("q-item-section",[t._v("Edit Post")])],1)],1)],1)],1)],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticStyle:{padding:"5px"},attrs:{clickable:""},on:{click:function(a){return t.handleDetailPost(e.id)}}},[a("q-item-section",{domProps:{innerHTML:t._s(e.content)}})],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",flat:"",round:"",color:"primary",icon:"fas fa-thumbs-up"}},[a("q-badge",{attrs:{color:"orange",floating:""}},[t._v(t._s(e.totalLike))]),a("q-tooltip",{attrs:{anchor:"bottom left",self:"center left"}},[t._v("Here I am!")])],1)],1),a("q-item-section"),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",flat:"",round:"",color:"secondary",icon:"fas fa-comments"}},[a("q-badge",{attrs:{color:"orange",floating:""}},[t._v(t._s(e.totalComments))]),a("q-tooltip",{attrs:{anchor:"bottom left",self:"center left"}},[t._v("Here I am!")])],1)],1)],1),a("q-separator"),a("q-item",{staticStyle:{padding:"0"},attrs:{dense:""}},[a("q-item-section",[a("q-btn-group",{attrs:{size:"sm",flat:"",spread:""}},[a("q-btn",{attrs:{size:"sm",flat:"",icon:"fas fa-thumbs-up",color:"grey-7","text-color":e.liked?"primary":"",label:"Like"},on:{click:function(a){e.liked?t.handlePostUnlike(e.id):t.handlePostLike(e.id)}}}),a("q-btn",{attrs:{size:"sm",flat:"",icon:"fas fa-comments",color:"grey-7",label:"Comment"}})],1)],1)],1)],1)],1)}),1)],1)},i=[],s=a("4db1"),n=a.n(s),r=(a("7f7f"),a("20d6"),a("04e1")),c=a.n(r),l=[{id:5,name:"Brunhilde Panswick",email:"bpanswick4@csmonitor.com",avatar:"avatar2.jpg"}],d={data:function(){return{post_params:{page:1,count:1,size:5},items:[],offline:l,drawerLeft:!0,createPostDialog:!1,editor:""}},computed:{getCurrentUser:function(){return c()(this.$q.sessionStorage.getItem("token"))}},created:function(){},methods:{handleDetailPost:function(t){this.$router.push({name:"feed-detail",params:{id:t}})},handleUpdatePost:function(t,e){this.createPostDialog=!0,this.editor=t.content},handleRemovePost:function(t,e){var a=this;this.$axios.delete("/api/v1/post/".concat(t)).then(function(t){a.items.splice(e,1),a.post_params.count=a.post_params.count-1,a.$q.notify({message:"Post Deleted",color:"green"})})},savePost:function(){var t=this;this.$q.loading.show(),this.$axios.post("/api/v1/createPost",{content:this.editor}).then(function(e){console.log(e.data),t.$q.loading.hide(),t.createPostDialog=!1,t.items.unshift({id:e.data.post._id,content:e.data.post.content,postedBy:{name:"sagar",id:e.data.post.postedBy},date:e.data.post.updatedAt}),t.editor=""})},updatePost:function(){},handlePostLike:function(t){var e=this;this.$axios.put("/api/v1/like/".concat(t)).then(function(t){var a=e.items.findIndex(function(e){return e.id===t.data.post._id});e.items[a]["liked"]=!0,e.items[a]["totalLike"]=t.data.post.totalLike})},handlePostUnlike:function(t){var e=this;this.$axios.put("/api/v1/unlike/".concat(t)).then(function(t){var a=e.items.findIndex(function(e){return e.id===t.data.post._id});e.items[a]["liked"]=!1,e.items[a]["totalLike"]=t.data.post.totalLike})},onLoad:function(t,e){var a=this;console.log(this.items.length,this.post_params.count),this.items.length<this.post_params.count&&(this.post_params.page=t,this.$axios.get("/api/v1/getPosts",{params:this.post_params}).then(function(t){var o;a.post_params.count=t.data.totalPosts;var i=t.data.posts.map(function(t){return{id:t._id,content:t.content,postedBy:{id:t.postedBy._id,name:t.postedBy.name},date:t.updatedAt,liked:t.liked,totalComments:t.totalComments,totalLike:t.totalLike}});(o=a.items).push.apply(o,n()(i)),e()}))}}},p=d,m=a("2877"),u=Object(m["a"])(p,o,i,!1,null,null,null);e["default"]=u.exports}}]);